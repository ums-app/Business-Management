"use strict";(self.webpackChunkBusiness_Management=self.webpackChunkBusiness_Management||[]).push([[400],{1479:(t,a,l)=>{l.d(a,{A:()=>i});l(9950);var e=l(6187),o=l(278),s=l(9709),n=l(4333),d=l(4414);o.t1.register(o.E8,o.PP,o.kc,o.m_,o.s$,s.A);const i=t=>{let{chartData:a,title:l}=t;const[o]=(0,n.sq)();console.log(o);const s={plugins:{datalabels:{display:!0,color:"true"===localStorage.getItem("isDark")?"#fff":"#000",align:"end",anchor:"end",font:{weight:"bold",size:12},formatter:t=>`${t}`},tooltip:{enabled:!0}},scales:{x:{ticks:{color:"true"===localStorage.getItem("isDark")?"#fff":"#000"}},y:{beginAtZero:!0,stepSize:10,max:10*Math.ceil((Math.max(...a.datasets[0].data)+50)/10)}}};return(0,d.jsx)(e.yP,{data:a,options:s})}},3728:(t,a,l)=>{l.d(a,{A:()=>i});l(9950);var e=l(6187),o=l(278),s=l(9709),n=l(4635),d=l(4414);o.t1.register(o.Bs,o.m_,o.s$,s.A);const i=function(t){let{data:a,chartTitle:l,unit:o="",totalAmount:s}=t;const i={id:"textCenterDoughnut",afterDatasetDraw(t,a,l){var e,o;const{ctx:n}=t,d=null===(e=t.getDatasetMeta(0).data[0])||void 0===e?void 0:e.x,i=null===(o=t.getDatasetMeta(0).data[0])||void 0===o?void 0:o.y;n.fillStyle="crimson",n.font="bold 32px sans-serif",n.textAlign="center",n.fillText(s,d,i)}},c={responsive:!0,plugins:{title:{display:!0,text:l},legend:{display:!0,position:"top",labels:{}},datalabels:{display:!0,color:"#fff",align:"center",anchor:"center",clamp:!0,font:{weight:"bold",size:12},formatter:t=>`${t} ${(0,n.t)(o)}`},tooltip:{enabled:!0}},cutout:"50%",circumference:360,animation:{animateScale:!0,animateRotate:!0}};return(0,d.jsx)(e.nu,{options:c,title:l,data:a,plugins:s&&[i]})}},7400:(t,a,l)=>{l.r(a),l.d(a,{default:()=>p});var e=l(9950),o=l(4635),s=l(7322),n=l(1479),d=l(3728),i=l(9450),c=l(9933),r=l(8383),u=l(5282),m=l(7725),f=l(4414);const h=()=>{const[t,a]=(0,e.useState)(),[l,h]=(0,e.useState)([]),[A,x]=(0,e.useState)([]),[_,p]=(0,e.useState)({totalAllAmount:0,totalAllFactor:0,totalPaidAmount:0,totalAllRemainedAmount:0,totalSoldProducts:0}),[g,b]=(0,e.useState)(),[j,v]=(0,e.useState)();(0,e.useEffect)((()=>{(0,m.ZY)().then((t=>{console.log(t),a(t)})),(0,m.xC)().then((t=>{console.log(t),h(t)})),(0,m.d$)().then((t=>{x(t)}))}),[]),(0,e.useEffect)((()=>{console.log("useEffect run for analysing data"),t&&l&&N(t,l),console.log("end useEffect run for analysing data")}),[t,l,A]);const N=function(t,a){arguments.length>2&&void 0!==arguments[2]||new Date;let l={totalAllAmount:0,totalAllFactor:t.length,totalAllRemainedAmount:0,totalPaidAmount:0,totalSoldProducts:0};t.forEach((a=>{let e=0;a.productsInFactor.forEach((t=>e+=Number(t.total)));let o=a.type==u.i.SUNDRY_FACTOR?Number(a.paidAmount):0;l={...l,totalAllAmount:l.totalAllAmount+Number(a.totalAll),totalAllFactor:t.length,totalSoldProducts:l.totalSoldProducts+e,totalPaidAmount:l.totalPaidAmount+o}}));let e=0;a.forEach((t=>e+=t.amount));let o=l.totalAllAmount-e;l={...l,totalPaidAmount:e,totalAllRemainedAmount:o},p(l),S()},S=()=>{const a=[],l=[];let e={backgroundColor:[],data:[],label:(0,o.t)("theAmountOfMoneySold")},s={backgroundColor:[],data:[],label:(0,o.t)("totalNumberOFSold")};A.forEach(((o,n)=>{let d=0,i=0;null===t||void 0===t||t.forEach((t=>{const a=t.productsInFactor.find((t=>t.productId==o.id));a&&(d+=Number(a.totalPrice),i+=Number(a.total))})),e.data.push(d),s.data.push(i),a.push(o.name),l.push(r.Ay[n])})),e.backgroundColor=l,s.backgroundColor=l,b({labels:a,datasets:[e]}),v({labels:a,datasets:[s]})};return console.log(_),t?(0,f.jsxs)("div",{className:"input",children:[(0,f.jsx)("h1",{className:"title",children:(0,o.t)("todaySalesStatistics")}),(0,f.jsxs)("div",{className:"display_flex margin_top_20 flex_flow_wrap flex_direction_column justify_content_center full_width",children:[(0,f.jsxs)("div",{className:"display_flex flex_flow_wrap justify_content_space_around",children:[(0,f.jsxs)("div",{className:"card_box data_card_info margin_5",children:[(0,f.jsx)("div",{children:(0,o.t)("theAmountOfMoneySold")}),(0,f.jsx)("div",{className:"bold",children:_.totalAllAmount})]}),(0,f.jsxs)("div",{className:"card_box data_card_info margin_5",children:[(0,f.jsx)("div",{children:(0,o.t)("totalAllPaidAmount")}),(0,f.jsx)("div",{className:"bold",children:_.totalPaidAmount})]}),(0,f.jsxs)("div",{className:"card_box data_card_info margin_5",children:[(0,f.jsx)("div",{children:(0,o.t)("totalRemainedAmount")}),(0,f.jsxs)("div",{className:"bold",children:[Math.abs(_.totalAllRemainedAmount),(0,f.jsx)(i.A,{number:_.totalAllRemainedAmount})]})]}),(0,f.jsxs)("div",{className:"card_box data_card_info margin_5",children:[(0,f.jsx)("div",{children:(0,o.t)("totalProducts")}),(0,f.jsx)("div",{className:"bold",children:_.totalSoldProducts})]})]}),(0,f.jsxs)("div",{className:" full_width justify_content_space_around display_flex flex_flow_wrap margin_top_10",children:[(0,f.jsxs)("div",{className:"chart_container input",children:[(0,f.jsx)("p",{className:"title_2 ",children:(0,o.t)("theAmountOfMoneySold")}),g?(0,f.jsx)(d.A,{data:g,unit:"af"}):(0,f.jsx)(s.A,{})]}),(0,f.jsxs)("div",{className:" chart_container input",children:[(0,f.jsx)("p",{className:"title_2",children:(0,o.t)("totalNumberOFSold")}),j?(0,f.jsx)(n.A,{chartData:j}):(0,f.jsx)(s.A,{})]})]})]})]}):(0,f.jsx)(c.A,{children:(0,f.jsx)(s.A,{})})};var A=l(4333),x=l(5022),_=l(6974);const p=()=>{const[{authentication:t}]=(0,A.sq)();return t.roles.includes(x.A.ADMIN)||t.roles.includes(x.A.SUPER_ADMIN)?(0,f.jsx)("div",{className:"fade_in",children:(0,f.jsx)(h,{})}):(0,f.jsx)(_.default,{})}}}]);