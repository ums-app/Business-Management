"use strict";(self.webpackChunkBusiness_Management=self.webpackChunkBusiness_Management||[]).push([[339,400],{1479:(t,a,l)=>{l.d(a,{A:()=>i});l(9950);var e=l(6187),o=l(278),s=l(9709),n=l(4333),d=l(4414);o.t1.register(o.E8,o.PP,o.kc,o.m_,o.s$,s.A);const i=t=>{let{chartData:a,title:l}=t;const[o]=(0,n.sq)();console.log(o);const s={plugins:{datalabels:{display:!0,color:"true"===localStorage.getItem("isDark")?"#fff":"#000",align:"end",anchor:"end",font:{weight:"bold",size:12},formatter:t=>`${t}`},tooltip:{enabled:!0}},scales:{x:{ticks:{color:"true"===localStorage.getItem("isDark")?"#fff":"#000"}},y:{beginAtZero:!0,stepSize:10,max:10*Math.ceil((Math.max(...a.datasets[0].data)+50)/10)}}};return(0,d.jsx)(e.yP,{data:a,options:s})}},3728:(t,a,l)=>{l.d(a,{A:()=>i});l(9950);var e=l(6187),o=l(278),s=l(9709),n=l(4635),d=l(4414);o.t1.register(o.Bs,o.m_,o.s$,s.A);const i=function(t){let{data:a,chartTitle:l,unit:o="",totalAmount:s}=t;const i={id:"textCenterDoughnut",afterDatasetDraw(t,a,l){var e,o;const{ctx:n}=t,d=null===(e=t.getDatasetMeta(0).data[0])||void 0===e?void 0:e.x,i=null===(o=t.getDatasetMeta(0).data[0])||void 0===o?void 0:o.y;n.fillStyle="crimson",n.font="bold 32px sans-serif",n.textAlign="center",n.fillText(s,d,i)}},c={responsive:!0,plugins:{title:{display:!0,text:l},legend:{display:!0,position:"top",labels:{}},datalabels:{display:!0,color:"#fff",align:"center",anchor:"center",clamp:!0,font:{weight:"bold",size:12},formatter:t=>`${t} ${(0,n.t)(o)}`},tooltip:{enabled:!0}},cutout:"50%",circumference:360,animation:{animateScale:!0,animateRotate:!0}};return(0,d.jsx)(e.nu,{options:c,title:l,data:a,plugins:s&&[i]})}},7400:(t,a,l)=>{l.r(a),l.d(a,{default:()=>j});var e=l(9950),o=l(4635),s=l(7322),n=l(1479),d=l(3728),i=l(9450),c=l(9933),r=l(8383),u=l(5282),m=l(7725),h=l(4414);const A=()=>{const[t,a]=(0,e.useState)(),[l,A]=(0,e.useState)([]),[f,_]=(0,e.useState)([]),[x,j]=(0,e.useState)({totalAllAmount:0,totalAllFactor:0,totalPaidAmount:0,totalAllRemainedAmount:0,totalSoldProducts:0}),[p,g]=(0,e.useState)(),[v,b]=(0,e.useState)();(0,e.useEffect)((()=>{(0,m.ZY)().then((t=>{console.log(t),a(t)})),(0,m.xC)().then((t=>{console.log(t),A(t)})),(0,m.d$)().then((t=>{_(t)}))}),[]),(0,e.useEffect)((()=>{console.log("useEffect run for analysing data"),t&&l&&N(t,l),console.log("end useEffect run for analysing data")}),[t,l,f]);const N=function(t,a){arguments.length>2&&void 0!==arguments[2]||new Date;let l={totalAllAmount:0,totalAllFactor:t.length,totalAllRemainedAmount:0,totalPaidAmount:0,totalSoldProducts:0};t.forEach((a=>{let e=0;a.productsInFactor.forEach((t=>e+=Number(t.total)));let o=a.type==u.i.SUNDRY_FACTOR?Number(a.paidAmount):0;l={...l,totalAllAmount:l.totalAllAmount+Number(a.totalAll),totalAllFactor:t.length,totalSoldProducts:l.totalSoldProducts+e,totalPaidAmount:l.totalPaidAmount+o}}));let e=0;a.forEach((t=>e+=t.amount));let o=l.totalAllAmount-e;l={...l,totalPaidAmount:e,totalAllRemainedAmount:o},j(l),S()},S=()=>{const a=[],l=[];let e={backgroundColor:[],data:[],label:(0,o.t)("theAmountOfMoneySold")},s={backgroundColor:[],data:[],label:(0,o.t)("totalNumberOFSold")};f.forEach(((o,n)=>{let d=0,i=0;null===t||void 0===t||t.forEach((t=>{const a=t.productsInFactor.find((t=>t.productId==o.id));a&&(d+=Number(a.totalPrice),i+=Number(a.total))})),e.data.push(d),s.data.push(i),a.push(o.name),l.push(r.Ay[n])})),e.backgroundColor=l,s.backgroundColor=l,g({labels:a,datasets:[e]}),b({labels:a,datasets:[s]})};return console.log(x),t?(0,h.jsxs)("div",{className:"input",children:[(0,h.jsx)("h1",{className:"title",children:(0,o.t)("todaySalesStatistics")}),(0,h.jsxs)("div",{className:"display_flex margin_top_20 flex_flow_wrap flex_direction_column justify_content_center full_width",children:[(0,h.jsxs)("div",{className:"display_flex flex_flow_wrap justify_content_space_around",children:[(0,h.jsxs)("div",{className:"card_box data_card_info margin_5",children:[(0,h.jsx)("div",{children:(0,o.t)("theAmountOfMoneySold")}),(0,h.jsx)("div",{className:"bold",children:x.totalAllAmount})]}),(0,h.jsxs)("div",{className:"card_box data_card_info margin_5",children:[(0,h.jsx)("div",{children:(0,o.t)("totalAllPaidAmount")}),(0,h.jsx)("div",{className:"bold",children:x.totalPaidAmount})]}),(0,h.jsxs)("div",{className:"card_box data_card_info margin_5",children:[(0,h.jsx)("div",{children:(0,o.t)("totalRemainedAmount")}),(0,h.jsxs)("div",{className:"bold",children:[Math.abs(x.totalAllRemainedAmount),(0,h.jsx)(i.A,{number:x.totalAllRemainedAmount})]})]}),(0,h.jsxs)("div",{className:"card_box data_card_info margin_5",children:[(0,h.jsx)("div",{children:(0,o.t)("totalProducts")}),(0,h.jsx)("div",{className:"bold",children:x.totalSoldProducts})]})]}),(0,h.jsxs)("div",{className:" full_width justify_content_space_around display_flex flex_flow_wrap margin_top_10",children:[(0,h.jsxs)("div",{className:"chart_container input",children:[(0,h.jsx)("p",{className:"title_2 ",children:(0,o.t)("theAmountOfMoneySold")}),p?(0,h.jsx)(d.A,{data:p,unit:"af"}):(0,h.jsx)(s.A,{})]}),(0,h.jsxs)("div",{className:" chart_container input",children:[(0,h.jsx)("p",{className:"title_2",children:(0,o.t)("totalNumberOFSold")}),v?(0,h.jsx)(n.A,{chartData:v}):(0,h.jsx)(s.A,{})]})]})]})]}):(0,h.jsx)(c.A,{children:(0,h.jsx)(s.A,{})})};var f=l(4333),_=l(5022),x=l(6974);const j=()=>{const[{authentication:t}]=(0,f.sq)();return t.roles.includes(_.A.ADMIN)||t.roles.includes(_.A.SUPER_ADMIN)?(0,h.jsx)("div",{className:"fade_in",children:(0,h.jsx)(A,{})}):(0,h.jsx)(x.default,{})}},1339:(t,a,l)=>{l.r(a),l.d(a,{default:()=>v});var e=l(9950),o=l(4333),s=(l(6509),l(4635)),n=l(4414);var d=l(6583),i=l.n(d),c=l(8484),r=l(9933),u=l(7322),m=l(8383),h=l(5282),A=l(7725),f=l(9450),_=l(3728),x=l(1479);const j=()=>{const[{authentication:t,locale:a},l]=(0,o.sq)(),[d,i]=(0,e.useState)(),[c,j]=(0,e.useState)([]),[p,g]=(0,e.useState)([]),[v,b]=(0,e.useState)({totalAllAmount:0,totalAllFactor:0,totalPaidAmount:0,totalAllRemainedAmount:0,totalSoldProducts:0}),[N,S]=(0,e.useState)(),[y,P]=(0,e.useState)();(0,e.useEffect)((()=>{(0,A.kP)(t.originalEntityId).then((t=>{console.log(t),i(t);const a=Array.from(new Set(t.filter((t=>t.type===h.i.STANDARD_FACTOR)).map((t=>t.customer.id))));(0,A.ak)(a).then((t=>{j(t)})).finally((()=>{}))})),(0,A.d$)().then((t=>{g(t)}))}),[,a]),(0,e.useEffect)((()=>{console.log("useEffect run for analysing data"),d&&c&&w(d,c),console.log("end useEffect run for analysing data")}),[d,c,p]);const w=function(t,a){arguments.length>2&&void 0!==arguments[2]||new Date;let l={totalAllAmount:0,totalAllFactor:t.length,totalAllRemainedAmount:0,totalPaidAmount:0,totalSoldProducts:0};t.forEach((a=>{let e=0;a.productsInFactor.forEach((t=>e+=Number(t.total)));let o=a.type==h.i.SUNDRY_FACTOR?Number(a.paidAmount):0;l={...l,totalAllAmount:l.totalAllAmount+Number(a.totalAll),totalAllFactor:t.length,totalSoldProducts:l.totalSoldProducts+e,totalPaidAmount:l.totalPaidAmount+o}}));let e=0;a.forEach((t=>e+=t.amount));let o=l.totalAllAmount-e;l={...l,totalPaidAmount:e,totalAllRemainedAmount:o},b(l),E()},E=()=>{const t=[],l=[];let e={backgroundColor:[],data:[],label:(0,s.t)("theAmountOfMoneySold")},o={backgroundColor:[],data:[],label:(0,s.t)("totalNumberOFSold")};p.forEach(((s,n)=>{let i=0,c=0;null===d||void 0===d||d.forEach((t=>{const a=t.productsInFactor.find((t=>t.productId==s.id));a&&(i+=Number(a.totalPrice),c+=Number(a.total))})),e.data.push(i),o.data.push(c),t.push("en"==a?s.englishName:s.name),l.push(m.Ay[n])})),e.backgroundColor=l,o.backgroundColor=l,S({labels:t,datasets:[e]}),P({labels:t,datasets:[o]})};return console.log(v),d?(0,n.jsxs)("div",{className:"input",children:[(0,n.jsxs)("h1",{className:"title",children:[" ",(0,s.t)("statistics")," ",(0,s.t)("sales")]}),(0,n.jsxs)("div",{className:"display_flex margin_top_20 flex_flow_wrap flex_direction_column justify_content_center full_width",children:[(0,n.jsxs)("div",{className:"display_flex flex_flow_wrap justify_content_space_around",children:[(0,n.jsxs)("div",{className:"card_box data_card_info margin_5",children:[(0,n.jsx)("div",{children:(0,s.t)("theAmountOfMoneySold")}),(0,n.jsx)("div",{className:"bold",children:v.totalAllAmount})]}),(0,n.jsxs)("div",{className:"card_box data_card_info margin_5",children:[(0,n.jsx)("div",{children:(0,s.t)("totalAllPaidAmount")}),(0,n.jsx)("div",{className:"bold",children:v.totalPaidAmount})]}),(0,n.jsxs)("div",{className:"card_box data_card_info margin_5",children:[(0,n.jsx)("div",{children:(0,s.t)("totalRemainedAmount")}),(0,n.jsxs)("div",{className:"bold",children:[Math.abs(v.totalAllRemainedAmount),(0,n.jsx)(f.A,{number:v.totalAllRemainedAmount})]})]}),(0,n.jsxs)("div",{className:"card_box data_card_info margin_5",children:[(0,n.jsx)("div",{children:(0,s.t)("totalProducts")}),(0,n.jsx)("div",{className:"bold",children:v.totalSoldProducts})]})]}),(0,n.jsxs)("div",{className:" full_width justify_content_space_around display_flex flex_flow_wrap margin_top_10",children:[(0,n.jsxs)("div",{className:"chart_container input",children:[(0,n.jsx)("p",{className:"title_2 ",children:(0,s.t)("theAmountOfMoneySold")}),N?(0,n.jsx)(_.A,{totalAmount:`${v.totalAllAmount} ${(0,s.t)("af")}`,data:N,unit:"af"}):(0,n.jsx)(u.A,{})]}),(0,n.jsxs)("div",{className:" chart_container input",children:[(0,n.jsx)("p",{className:"title_2",children:(0,s.t)("totalNumberOFSold")}),y?(0,n.jsx)(x.A,{chartData:y}):(0,n.jsx)(u.A,{})]})]})]})]}):(0,n.jsx)(r.A,{children:(0,n.jsx)(u.A,{})})},p=()=>{const[{authentication:t,locale:a},l]=(0,o.sq)(),[d,i]=(0,e.useState)(),[c,j]=(0,e.useState)([]),[p,g]=(0,e.useState)([]),[v,b]=(0,e.useState)({totalAllAmount:0,totalAllFactor:0,totalPaidAmount:0,totalAllRemainedAmount:0,totalSoldProducts:0}),[N,S]=(0,e.useState)(),[y,P]=(0,e.useState)();(0,e.useEffect)((()=>{(0,A.FK)(t.originalEntityId).then((t=>{console.log(t),i(t)})),(0,A.Z)(t.originalEntityId).then((t=>{j(t)})).finally((()=>{})),(0,A.d$)().then((t=>{g(t)}))}),[,a]),(0,e.useEffect)((()=>{console.log("useEffect run for analysing data"),d&&c&&w(d,c),console.log("end useEffect run for analysing data")}),[d,c,p]);const w=function(t,a){arguments.length>2&&void 0!==arguments[2]||new Date;let l={totalAllAmount:0,totalAllFactor:t.length,totalAllRemainedAmount:0,totalPaidAmount:0,totalSoldProducts:0};t.forEach((a=>{let e=0;a.productsInFactor.forEach((t=>e+=Number(t.total)));let o=a.type==h.i.SUNDRY_FACTOR?Number(a.paidAmount):0;l={...l,totalAllAmount:l.totalAllAmount+Number(a.totalAll),totalAllFactor:t.length,totalSoldProducts:l.totalSoldProducts+e,totalPaidAmount:l.totalPaidAmount+o}}));let e=0;a.forEach((t=>e+=t.amount));let o=l.totalAllAmount-e;l={...l,totalPaidAmount:e,totalAllRemainedAmount:o},b(l),E()};console.log(a);const E=()=>{const t=[],l=[];let e={backgroundColor:[],data:[],label:(0,s.t)("theAmountOfMoneyPurchase")},o={backgroundColor:[],data:[],label:(0,s.t)("totalNumberOFPurchasedProduct")};p.forEach(((s,n)=>{let i=0,c=0;null===d||void 0===d||d.forEach((t=>{const a=t.productsInFactor.find((t=>t.productId==s.id));a&&(i+=Number(a.totalPrice),c+=Number(a.total))})),e.data.push(i),o.data.push(c),t.push("en"==a?s.englishName:s.name),l.push(m.Ay[n])})),e.backgroundColor=l,o.backgroundColor=l,S({labels:t,datasets:[e]}),P({labels:t,datasets:[o]})};return console.log(v),d?(0,n.jsxs)("div",{className:"input",children:[(0,n.jsx)("h1",{className:"title",children:(0,s.t)("purchasesStatistics")}),(0,n.jsxs)("div",{className:"display_flex margin_top_20 flex_flow_wrap flex_direction_column justify_content_center full_width",children:[(0,n.jsxs)("div",{className:"display_flex flex_flow_wrap justify_content_space_around",children:[(0,n.jsxs)("div",{className:"card_box data_card_info margin_5",children:[(0,n.jsx)("div",{children:(0,s.t)("theAmountOfMoneyPurchase")}),(0,n.jsx)("div",{className:"bold",children:v.totalAllAmount})]}),(0,n.jsxs)("div",{className:"card_box data_card_info margin_5",children:[(0,n.jsx)("div",{children:(0,s.t)("totalAllPaidAmount")}),(0,n.jsx)("div",{className:"bold",children:v.totalPaidAmount})]}),(0,n.jsxs)("div",{className:"card_box data_card_info margin_5",children:[(0,n.jsx)("div",{children:(0,s.t)("totalRemainedAmount")}),(0,n.jsxs)("div",{className:"bold",children:[Math.abs(v.totalAllRemainedAmount),(0,n.jsx)(f.A,{number:v.totalAllRemainedAmount})]})]}),(0,n.jsxs)("div",{className:"card_box data_card_info margin_5",children:[(0,n.jsx)("div",{children:(0,s.t)("totalProducts")}),(0,n.jsx)("div",{className:"bold",children:v.totalSoldProducts})]})]}),(0,n.jsxs)("div",{className:" full_width justify_content_space_around display_flex flex_flow_wrap margin_top_10",children:[(0,n.jsxs)("div",{className:"chart_container input margin_top_10",children:[(0,n.jsx)("p",{className:"title_2 ",children:(0,s.t)("theAmountOfMoneyPurchase")}),N?(0,n.jsx)(_.A,{totalAmount:`${v.totalAllAmount} ${(0,s.t)("af")}`,data:N,unit:"af"}):(0,n.jsx)(u.A,{})]}),(0,n.jsxs)("div",{className:" chart_container input margin_top_10",children:[(0,n.jsx)("p",{className:"title_2",children:(0,s.t)("totalNumberOFPurchasedProduct")}),y?(0,n.jsx)(x.A,{chartData:y}):(0,n.jsx)(u.A,{})]})]})]})]}):(0,n.jsx)(r.A,{children:(0,n.jsx)(u.A,{})})};var g=l(7400);const v=()=>{var t,a,l,s;const[{authentication:d},r]=(0,o.sq)();return(0,e.useEffect)((()=>{}),[]),(null===d||void 0===d||null===(t=d.userType)||void 0===t?void 0:t.toLowerCase())==(null===(a=c.zO.VISITOR)||void 0===a?void 0:a.toLowerCase())?(0,n.jsx)(j,{}):(null===d||void 0===d||null===(l=d.userType)||void 0===l?void 0:l.toLowerCase())==(null===(s=c.zO.CUSTOMER)||void 0===s?void 0:s.toLowerCase())?(0,n.jsx)(p,{}):(0,n.jsxs)("div",{className:"home fade_in",children:[(0,n.jsx)("h1",{className:"text_align_center",style:{fontSize:"34px"},children:(0,n.jsx)(i(),{format:"HH:mm:ss",interval:1e3,ticking:!0})}),(0,n.jsx)(g.default,{})]})}}}]);