"use strict";(self.webpackChunkBusiness_Management=self.webpackChunkBusiness_Management||[]).push([[19],{5019:(e,t,s)=>{s.r(t),s.d(t,{default:()=>S});var a=s(9950),l=s(4635),c=s(9154),n=(s(1714),s(4276)),o=s(6220),i=s(8429),r=s(9933),d=s(329),h=s(7322),u=s(5214),m=s(9786),x=s(7065),p=s(4333),g=s(549),_=s(8484),f=s(1683),j=s(1823),y=s(6509),N=s(5022),v=s(6974),b=s(7246),A=s(4414);const S=function(){const e=(0,i.Zp)(),[{authentication:t},s]=(0,p.sq)(),[S,P]=(0,a.useState)(),[w,M]=(0,a.useState)(),D=(0,o.rJ)(n.db,m.A.Purchases),[G,k]=(0,a.useState)(_.mm[0]),[C,E]=(0,a.useState)(),[B,z]=(0,a.useState)(0),[F,I]=(0,a.useState)(1),[T,R]=(0,a.useState)(null),[q,H]=(0,a.useState)(null),[O,U]=(0,a.useState)(!1),[J,Q]=(0,a.useState)(""),[V,Z]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(async()=>{const e=(await(0,o.GG)(D)).docs.map((e=>({...e.data(),id:e.id})));P(e),console.log(e)})(),$(_.mm[0])}),[]);const $=async e=>{const t=await(0,o.d_)(D),s=t.data().count;console.log(t.data()),console.log(e),z(s);const a=Math.ceil(s/e);console.log(a),E(a),K(e)},K=async e=>{Z(!0);try{let t=[(0,o.My)("createdDate","asc"),(0,o.AB)(e)];J.length>0&&t.unshift((0,o._M)("indexNumber","==",Number(J)));const s=(0,o.P)(D,...t),a=await(0,o.GG)(s);if(a.empty)return console.log("No documents found."),M([]),void Z(!1);const l=a.docs.map((e=>({...e.data(),id:e.id})));M(l),H(a.docs[0]),R(a.docs[a.docs.length-1]),U(!1),I(1),console.log("First page of data loaded successfully")}catch(t){console.error("Error fetching the first page: ",t)}finally{Z(!1)}};return S?t.roles.includes(N.A.ADMIN)||t.roles.includes(N.A.SUPER_ADMIN)?(0,A.jsxs)("div",{children:[(0,A.jsx)(c.A,{text:(0,l.t)("add")+" "+(0,l.t)("purchases"),onClick:()=>e("add"),btnType:b.A.modern}),(0,A.jsx)("h1",{className:"margin_10 title",children:(0,l.t)("purchases")}),(0,A.jsxs)("div",{className:"table_container ",children:[(0,A.jsxs)("div",{className:"search_pagination display_flex flex_flow_wrap justify_content_space_between input align_items_center",children:[(0,A.jsxs)("div",{className:"search_bar display_flex align_items_center",children:[(0,A.jsxs)("div",{className:"position_relative",children:[(0,A.jsx)("input",{type:"text",placeholder:(0,l.t)("indexNumber"),onChange:e=>{return t=e.target.value,void Q(t);var t},id:"searchBox"}),(0,A.jsx)(j.m_,{anchorSelect:"#searchBox",place:"top",className:"toolTip_style",children:(0,l.t)("enterValueForSearchingIndexNumber")})]}),(0,A.jsx)(c.A,{text:(0,l.t)("search"),icon:y.A.search,onClick:async()=>{Z(!0),console.log(J);try{let e=[(0,o.My)("createdDate","desc"),(0,o.AB)(G)];J.length>0&&e.unshift((0,o._M)("indexNumber","==",Number(J)));const t=(0,o.P)(D,...e),s=await(0,o.GG)(t);if(s.empty)return console.log("No documents found."),M([]),void Z(!1);const a=s.docs.map((e=>({...e.data(),id:e.id})));M(a),H(s.docs[0]),R(s.docs[s.docs.length-1]),U(!1),I(1)}catch(e){console.error("Error fetching documents: ",e)}finally{Z(!1)}}})]}),(0,A.jsxs)("div",{className:"pagination display_flex ",children:[(0,A.jsxs)("div",{className:"display_flex align_items_center ",children:[(0,A.jsx)("label",{htmlFor:"pageSize",children:(0,l.t)("size")}),(0,A.jsx)("select",{name:"pageSize",id:"pageSize",className:"input margin_left_10 margin_right_10",onChange:e=>{k(e.target.value),$(e.target.value)},children:_.mm.map((e=>(0,A.jsx)("option",{value:e,children:e},e)))}),(0,A.jsx)(j.m_,{anchorSelect:"#pageSize",place:"top",className:"toolTip_style",children:(0,l.t)("numberOfElementPerPage")})]}),(0,A.jsx)(f.A,{total:C,currentPage:F,nextPage:async()=>{if(T){Z(!0);try{let e=[(0,o.My)("createdDate","asc"),(0,o.HM)(T),(0,o.AB)(G)];J.length>0&&e.unshift((0,o._M)("indexNumber","==",Number(J)));const t=(0,o.P)(D,...e),s=await(0,o.GG)(t);if(s.empty)console.log("No more documents found.");else{const e=s.docs.map((e=>({...e.data(),id:e.id})));M(e),H(s.docs[0]),R(s.docs[s.docs.length-1]),U(!0),I((e=>e+1))}}catch(e){console.error("Error fetching next page: ",e)}finally{Z(!1)}}},prevPage:async()=>{if(q){Z(!0);try{let e=[(0,o.My)("createdDate","desc"),(0,o.rf)(q),(0,o.$1)(G)];J.length>0&&e.unshift((0,o._M)("indexNumber","==",Number(J)));const t=(0,o.P)(D,...e),s=await(0,o.GG)(t);if(s.empty)console.log("No previous documents found.");else{const e=s.docs.map((e=>({...e.data(),id:e.id})));M(e),H(s.docs[0]),R(s.docs[s.docs.length-1]),U(s.docs.length===G),I((e=>e-1))}}catch(e){console.error("Error fetching previous page: ",e)}finally{Z(!1)}}},isPrevPageAvailable:O})]})]}),V?(0,A.jsx)(h.A,{}):(0,A.jsx)("div",{className:"full_width overflow_x_scroll",children:(0,A.jsxs)("table",{className:"full_width custom_table table_row_hover",children:[(0,A.jsx)("thead",{children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{children:"#"}),(0,A.jsx)("th",{children:(0,l.t)("indexNumber")}),(0,A.jsx)("th",{children:(0,l.t)("createdDate")}),(0,A.jsxs)("th",{children:[(0,l.t)("total")," ",(0,l.t)("package")]}),(0,A.jsxs)("th",{children:[(0,l.t)("total")," ",(0,l.t)("products")]}),(0,A.jsx)("th",{children:(0,l.t)("totalAll")})]})}),(0,A.jsxs)("tbody",{children:[null===w||void 0===w?void 0:w.map(((t,a)=>(0,A.jsxs)("tr",{className:" cursor_pointer hover",onClick:()=>{s({type:g.QN.ADD_PURCHASE_FACTOR,payload:t}),e("/purchase-products/"+t.id)},children:[(0,A.jsx)("td",{children:a+1}),(0,A.jsx)("td",{children:t.indexNumber}),(0,A.jsx)("td",{children:(0,x.qI)(t.createdDate)}),(0,A.jsxs)("td",{children:[t.totalPackage," "]}),(0,A.jsx)("td",{children:t.totalProducts}),(0,A.jsx)("td",{children:t.totalAmount})]},t.id))),0==(null===w||void 0===w?void 0:w.length)&&(0,A.jsx)("tr",{children:(0,A.jsx)("td",{colSpan:6,children:(0,l.t)("notExist")})})]})]})})]})]}):(0,A.jsx)(v.default,{}):(0,A.jsxs)(r.A,{children:[(0,A.jsx)(u.A,{}),(0,A.jsx)(d.A,{}),(0,A.jsx)(h.A,{})]})}}}]);