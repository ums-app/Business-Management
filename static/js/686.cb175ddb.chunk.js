"use strict";(self.webpackChunkBusiness_Management=self.webpackChunkBusiness_Management||[]).push([[686],{3686:(t,e,n)=>{n.r(e),n.d(e,{default:()=>k});var s=n(9950),o=n(4635),l=n(7065),i=n(8484),a=n(7725),c=n(7322),d=n(3618),r=n(9154),m=n(4333),u=n(549),p=n(6220),h=n(9786),j=n(4276),x=n(1714),N=n(1823),v=n(8081),_=n(8692),y=n(4414);const C=t=>{let{type:e=i.l6.RETAIL_CONSUMPTION}=t;const[n,C]=(0,s.useState)([]),[A,D]=(0,s.useState)([]),[f,w]=(0,s.useState)(!0),[{authentication:g},S]=(0,m.sq)(),[O,I]=(0,s.useState)([]);(0,s.useEffect)((()=>{(0,a.Ot)(e).then((t=>{console.log(t),C(t),D(t)})).finally((()=>w(!1)))}),[]);const T=async(t,e)=>{S({type:u.QN.SET_GLOBAL_LOADING,payload:{value:!0}}),S({type:u.QN.HIDE_ASKING_MODAL});const s=(0,p.H9)(j.db,h.A.Consumptions,t);try{var l,c;await(0,p.kd)(s);const d=n[e],r={createdDate:new Date,registrar:`${g.name} ${g.lastname}`,title:`${(0,o.t)("delete")} ${(0,o.t)("consumptions")}`,message:` ${(0,o.t)("consumptions")} [${(0,o.t)("type")}:(${(0,o.t)(d.type)}) ${(0,o.t)("amount")}: (${d.amount}) ${d.type==i.l6.WITHDRAW&&(0,o.t)("toAccount")+": ("+(null===(l=d.to)||void 0===l?void 0:l.name)+" "+(null===(c=d.to)||void 0===c?void 0:c.lastName)})] ${(0,o.t)("successfullyDeleted")}`,data:{...A[e],id:t}};await(0,a.ll)(r),x.oR.success("successfullyDeleted");const m=[...n];m.splice(e,1),C(m)}catch(d){x.oR.error(d.message)}finally{S({type:u.QN.SET_GLOBAL_LOADING,payload:{value:!1}})}};return(0,y.jsxs)("div",{children:[(0,y.jsxs)("div",{className:"display_flex justify_content_center align_items_center full_width margin_top_20 margin_bottom_10",children:[(0,y.jsx)(v.A,{range:!0,onChange:t=>I(t),placeholder:(0,o.t)("chooseDatePeriod")}),(0,y.jsx)(r.A,{text:(0,o.t)("apply"),onClick:async()=>{const t=O.map((t=>new Date((0,_.$u)(t.year,t.month.number,t.day).join("/"))));let e=n;if(console.log(t),1==O.length&&(console.log(O),e=e.filter((e=>{const n=e.date.toDate(),s=new Date(t[0].setHours(0,0,0,0)),o=new Date(t[0].setHours(23,59,59,999));return n>=s&&n<=o}))),O.length>=2){console.log(O);const n=new Date(t[0].setHours(0,0,0,0)),s=new Date(t[1].setHours(23,59,59,999));e=e.filter((t=>{console.log(t.date.toDate());const e=t.date.toDate();return e>=n&&e<=s}))}D(e)}})]}),(0,y.jsxs)("div",{className:"margin_top_20",children:[f?(0,y.jsx)(d.A,{}):(0,y.jsx)("div",{className:"full_width  display_flex justify_content_end",children:(0,y.jsxs)("div",{className:"input display_flex justify_content_end",children:[(0,y.jsxs)("span",{className:"bold",children:[(0,o.t)("totalAll"),": "]}),(0,y.jsx)("span",{children:(()=>{let t=0;return A.forEach((e=>t+=Number(e.amount))),t})()})]})}),f?(0,y.jsx)(c.A,{}):(0,y.jsx)("div",{className:"full_width overflow_x_scroll",children:(0,y.jsxs)("table",{className:"custom_table full_width",children:[(0,y.jsxs)("thead",{style:{backgroundColor:"orange"},children:[(0,y.jsx)("tr",{children:(0,y.jsx)("th",{colSpan:e==i.l6.WITHDRAW?8:7,children:(t=>{switch(t){case i.l6.CONSTANT_CONSUMPTION:return(0,o.t)("constantConsumptions");case i.l6.MAJOR_CONSUMPTION:return(0,o.t)("majorConsumptions");case i.l6.RETAIL_CONSUMPTION:return(0,o.t)("retailConsumptions");case i.l6.WITHDRAW:return(0,o.t)("withdrawals");default:return(0,o.t)("unknown")}})(e)})}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{children:"#"}),(0,y.jsx)("th",{children:(0,o.t)("date")}),(0,y.jsx)("th",{children:(0,o.t)("amount")}),(0,y.jsx)("th",{children:(0,o.t)("type")}),e==i.l6.WITHDRAW&&(0,y.jsx)("th",{children:(0,o.t)("toAccount")}),(0,y.jsx)("th",{children:(0,o.t)("registrar")}),(0,y.jsx)("th",{children:(0,o.t)("descriptions")}),(0,y.jsx)("th",{children:(0,o.t)("actions")})]})]}),(0,y.jsxs)("tbody",{children:[A.map(((t,n)=>{var s,a;return(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:n+1}),(0,y.jsx)("td",{children:(0,l.qI)(t.date)}),(0,y.jsx)("td",{children:t.amount}),(0,y.jsx)("td",{children:(0,o.t)(t.type)}),e==i.l6.WITHDRAW&&(0,y.jsxs)("td",{children:[null===(s=t.to)||void 0===s?void 0:s.name," ",null===(a=t.to)||void 0===a?void 0:a.lastName]}),(0,y.jsx)("td",{children:t.registrar}),(0,y.jsx)("td",{children:t.descriptions}),(0,y.jsxs)("td",{children:[(0,y.jsx)(r.A,{text:(0,o.t)("delete"),onClick:()=>((t,e)=>{S({type:u.QN.SHOW_ASKING_MODAL,payload:{show:!0,message:"deleteMessage",btnAction:()=>T(t,e)}})})(t.id,n),btnType:"crossBtn",id:"delete_row"+n}),(0,y.jsx)(N.m_,{anchorSelect:"#delete_row"+n,place:"right",className:"toolTip_style",children:(0,o.t)("delete")})]})]},n)})),0==n.length&&(0,y.jsx)("tr",{children:(0,y.jsx)("td",{colSpan:e==i.l6.WITHDRAW?8:7,children:(0,o.t)("notExist")})})]})]})})]})]})},A=()=>(0,y.jsx)("div",{children:(0,y.jsx)(C,{type:i.l6.RETAIL_CONSUMPTION})}),D=()=>{const[t,e]=(0,s.useState)([]);return(0,y.jsx)("div",{children:(0,y.jsx)(C,{type:i.l6.MAJOR_CONSUMPTION})})},f=()=>{const[t,e]=(0,s.useState)([]);return(0,y.jsx)("div",{children:(0,y.jsx)(C,{type:i.l6.WITHDRAW})})},w=()=>{const[t,e]=(0,s.useState)([]);return(0,y.jsx)("div",{children:(0,y.jsx)(C,{type:i.l6.CONSTANT_CONSUMPTION})})};var g=n(2011),S=n(6974),O=n(5022),I=n(8429),T=n(6509),M=n(7246);const b=()=>{const t=(0,I.Zp)(),[e,n]=(0,s.useState)([]),[i,v]=(0,s.useState)(!0),[{authentication:_},C]=(0,m.sq)();(0,s.useEffect)((()=>{(0,a.kN)().then((t=>{n(t)})).finally((()=>v(!1)))}),[]);const A=async(t,s)=>{C({type:u.QN.SET_GLOBAL_LOADING,payload:{value:!0}}),C({type:u.QN.HIDE_ASKING_MODAL});const l=(0,p.H9)(j.db,h.A.Consumptions,t);try{await(0,p.kd)(l);const i={createdDate:new Date,registrar:`${_.name} ${_.lastname}`,title:`${(0,o.t)("delete")} ${(0,o.t)("consumptions")}`,message:`${(0,o.t)("consumptions")} [${t}] ${(0,o.t)("successfullyDeleted")}`,data:{...e[s],id:t}};await(0,a.ll)(i),x.oR.success("successfullyDeleted");const c=[...e];c.splice(s,1),n(c)}catch(i){x.oR.error(i.message)}finally{C({type:u.QN.SET_GLOBAL_LOADING,payload:{value:!1}})}};return(0,y.jsxs)("div",{children:[(0,y.jsx)("p",{className:"title",children:(0,o.t)("dailyConsumptions")}),(0,y.jsx)("div",{children:(0,y.jsx)(r.A,{icon:T.A.plus,text:(0,o.t)("add"),onClick:()=>t("add"),btnType:M.A.modern})}),(0,y.jsxs)("div",{className:"margin_top_20",children:[i?(0,y.jsx)(d.A,{}):(0,y.jsx)("div",{className:"full_width  display_flex justify_content_end",children:(0,y.jsxs)("div",{className:"input display_flex justify_content_end",children:[(0,y.jsxs)("span",{children:[(0,o.t)("totalAll"),": "]}),(0,y.jsx)("span",{children:(()=>{let t=0;return e.forEach((e=>t+=Number(e.amount))),t})()})]})}),i?(0,y.jsx)(c.A,{}):(0,y.jsx)("div",{className:"full_width overflow_x_scroll",children:(0,y.jsxs)("table",{className:"custom_table full_width",children:[(0,y.jsxs)("thead",{style:{backgroundColor:"orange"},children:[(0,y.jsx)("tr",{children:(0,y.jsx)("th",{colSpan:8,children:(0,o.t)("todayConsumptions")})}),(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{children:"#"}),(0,y.jsx)("th",{children:(0,o.t)("createdDate")}),(0,y.jsx)("th",{children:(0,o.t)("amount")}),(0,y.jsx)("th",{children:(0,o.t)("type")}),(0,y.jsx)("th",{children:(0,o.t)("toAccount")}),(0,y.jsx)("th",{children:(0,o.t)("registrar")}),(0,y.jsx)("th",{children:(0,o.t)("descriptions")}),(0,y.jsx)("th",{children:(0,o.t)("actions")})]})]}),(0,y.jsxs)("tbody",{children:[e.map(((t,e)=>{var n,s;return(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:e+1}),(0,y.jsx)("td",{children:(0,l.qI)(t.createdDate)}),(0,y.jsx)("td",{children:t.amount}),(0,y.jsx)("td",{children:(0,o.t)(t.type)}),(0,y.jsxs)("td",{children:[null===(n=t.to)||void 0===n?void 0:n.name," ",null===(s=t.to)||void 0===s?void 0:s.lastName]}),(0,y.jsx)("td",{children:t.registrar}),(0,y.jsx)("td",{children:t.descriptions}),(0,y.jsxs)("td",{children:[(0,y.jsx)(r.A,{text:(0,o.t)("delete"),onClick:()=>((t,e)=>{C({type:u.QN.SHOW_ASKING_MODAL,payload:{show:!0,message:"deleteMessage",btnAction:()=>A(t,e)}})})(t.id,e),btnType:"crossBtn",id:"delete_row"+e}),(0,y.jsx)(N.m_,{anchorSelect:"#delete_row"+e,place:"right",className:"toolTip_style",children:(0,o.t)("delete")})]})]},e)})),0==e.length&&(0,y.jsx)("tr",{children:(0,y.jsx)("td",{colSpan:8,children:(0,o.t)("notExist")})})]})]})})]})]})};var R=n(6152);const W={DailyConsumptions:{componentName:"DailyConsumptions",component:b},RetailConsumptions:{componentName:"RetailConsumptions",component:A},MajorConsumptions:{componentName:"MajorConsumptions",component:D},Withdrawals:{componentName:"Withdrawals",component:f},ConstantConsumptions:{componentName:"ConstantConsumptions",component:w}};const k=function(){var t,e,n,l,i;const[a,c]=(0,s.useState)({component:W.DailyConsumptions.component,componentName:W.DailyConsumptions.componentName}),[{authentication:d}]=(0,m.sq)();return d.isAuthenticated?d.roles.includes(O.A.ADMIN)||d.roles.includes(O.A.SUPER_ADMIN)?(0,y.jsxs)("div",{children:[(0,y.jsxs)(g.A,{children:[(0,y.jsx)("li",{className:(null===a||void 0===a?void 0:a.componentName)==(null===W||void 0===W||null===(t=W.DailyConsumptions)||void 0===t?void 0:t.componentName)?"active":"",onClick:()=>c({component:null===W||void 0===W?void 0:W.DailyConsumptions.component,componentName:W.DailyConsumptions.componentName}),children:(0,o.t)("dailyConsumptions")}),(0,y.jsx)("li",{className:(null===a||void 0===a?void 0:a.componentName)==(null===W||void 0===W||null===(e=W.RetailConsumptions)||void 0===e?void 0:e.componentName)?"active":"",onClick:()=>c({component:null===W||void 0===W?void 0:W.RetailConsumptions.component,componentName:W.RetailConsumptions.componentName}),children:(0,o.t)("retailConsumptions")}),(0,y.jsx)("li",{className:(null===a||void 0===a?void 0:a.componentName)==(null===W||void 0===W||null===(n=W.Withdrawals)||void 0===n?void 0:n.componentName)?"active":"",onClick:()=>c({component:null===W||void 0===W?void 0:W.Withdrawals.component,componentName:W.Withdrawals.componentName}),children:(0,o.t)("withdrawals")}),(0,y.jsx)("li",{className:(null===a||void 0===a?void 0:a.componentName)==(null===W||void 0===W||null===(l=W.MajorConsumptions)||void 0===l?void 0:l.componentName)?"active":"",onClick:()=>c({component:null===W||void 0===W?void 0:W.MajorConsumptions.component,componentName:W.MajorConsumptions.componentName}),children:(0,o.t)("majorConsumptions")}),(0,y.jsx)("li",{className:(null===a||void 0===a?void 0:a.componentName)==(null===W||void 0===W||null===(i=W.ConstantConsumptions)||void 0===i?void 0:i.componentName)?"active":"",onClick:()=>c({component:null===W||void 0===W?void 0:W.ConstantConsumptions.component,componentName:W.ConstantConsumptions.componentName}),children:(0,o.t)("constantConsumptions")})]}),(0,y.jsx)("div",{children:(0,y.jsx)(a.component,{})})]}):(0,y.jsx)(S.default,{}):(0,y.jsx)(R.A,{})}}}]);